# HTTP 메시지

HTTP 메시지는 단순한, 데이터의 구조화된 블록이다. 각 메시지는 클라이언트로부터의 요청이나 서버로부터의 응답 중 하나를 포함한다. 

메시지는 시작줄, 헤더 블록, 본문 이렇게 세 부분으로 이루어진다.

시작줄은 이것이 어떤 메시지인지 서술하며, 헤더 블록은 속성을, 본문은 데이터를 담고 있다. 

![image](https://user-images.githubusercontent.com/70934609/106663667-65850800-65e7-11eb-9ec7-c40592edd7a8.png)


- 요청 메시지의 형식

```
<메서드><요청 URL><버전>
<헤더>

<엔티티본문>
```

-  응답 메시지의 형식

```
<버전><상태코드><사유구절>
<헤더>

<엔티티본문>
```

## 메서드

클라이언트 측에서 서버가 리소스에 대해 수행해주길 바라는 동작이다.

![image](https://user-images.githubusercontent.com/70934609/106663828-98c79700-65e7-11eb-96ff-3b2b76b20c4b.png)


```
curl -v -s -o - -X OPTIONS https://google.com
```

## 상태 코드

![image](https://user-images.githubusercontent.com/70934609/106666311-c5c97900-65ea-11eb-9788-c31ef7e7d8f0.png)

상태 코드는 각 응답 메시지의 시작줄에 담겨 반환된다. 

200 ~ 299: 성공

300 ~ 399: 리소스가 옯겨졌음

400 ~ 499: 클라이언트가 잘못된 요청을 했음

500 ~ 599: 서버에서 실패했음


*만약 인식할 수 없는 상태 코드를 받게 되면, 누군가가 현재 프로토콜의 확장으로 정의했을 가능성이 있다.*

## 헤더

헤더의 목록은 빈 줄 (CRLF)로 끝나 헤더목록의 끝과 엔터티 본문의 시작을 표시한다.

- 일반 헤더: 오청과 응답 양쪽에 모두 나타날 수 있음

- 요청 헤더: 오청에 대한 부가 정보를 제공

- 응답 헤더: 응답에 대한 부가 정보를 제공

- Entity 헤더: 본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술

- 확장 헤더: 명세에 정의되지 않은 새로운 헤더

```
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/ *;q=0.8

Content-Type: text/html; charset-latin-1

Allow: GET,HEAD

Date: Sat, 2 Oct 2018 02:00:12 GMT
```

## 엔터티 본문

임의의 데이터 블록을 포함한다. 모든 메시지가 엔터티 본문을 갖는 것은 아니므로, 떄떄로 메시지는 그냥 CRLF로 끝나게 된다. 

그러나 많은 클라이언트와 서버가 엔터티 본문이 없는 경우 마지막 CRLF를 빠뜨리기 때문에 마지막 CRLF 없이 끝나는 메시지도 받아들일 수 있어야 한다.